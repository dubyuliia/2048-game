let e,t,n;const r=document.querySelector(".message-start"),o=document.querySelector(".message-win"),l=document.querySelector(".message-lose");function i(e){e.classList.remove("hidden")}function c(e){e.classList.add("hidden")}let d=0,s=document.getElementById("field");s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(let n=0;n<4;n++)for(let r=0;r<4;r++)(e=document.createElement("div")).id=n.toString()+"-"+r.toString(),t=s[n][r],f(e,t),document.getElementById("field").append(e);function f(n,r){e=n,t=r,e.innerText="",e.classList.value="",e.classList.add("field-cell"),t>0&&(e.innerText=t,t<=1024?e.classList.add("field-cell--"+t.toString()):e.classList.add("field-cell--2048"))}function u(e){return e.filter(e=>0!==e)}function a(e){n=u(e);for(let e=0;e<n.length-1;e++)n[e]===n[e+1]&&(n[e]*=2,d+=n[e],n[e+1]=0);for(n=u(n);n.length<4;)n.push(0);return n}function g(){if(!S(0))return;let t=!1;for(;!t;){let n=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());if(0===s[n][r]){let o=Math.random();s[n][r]=o<.9?2:4,(e=document.getElementById(n.toString()+"-"+r.toString())).innerText=s[n][r].toString(),e.classList.add("field-cell--"+s[n][r].toString()),t=!0}}}function m(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(0===s[e][t])return!0;for(let e=0;e<4;e++)for(let t=0;t<4;t++){if(t<3&&s[e][t]===s[e][t+1]||e<3&&s[e][t]===s[e+1][t])return!0;return!1}}function S(e){for(let t=0;t<4;t++)for(let n=0;n<4;n++)if(s[t][n]===e)return!0;return!1}function y(e,t){if(e.length!==t.length)return!1;for(let n=0;n<4;n++)for(let r=0;r<4;r++)if(e[n][r]!==t[n][r])return!1;return!0}const L=document.querySelector(".button.start");L.addEventListener("click",()=>{document.addEventListener("keyup",u=>{let L=JSON.parse(JSON.stringify(s));"ArrowLeft"===u.code?function(){let d;for(let r=0;r<4;r++){d=(n=s[r]).slice(),s[r]=a(n);for(let n=0;n<4;n++)e=document.getElementById(r.toString()+"-"+n.toString()),t=s[r][n],f(e,t)}S(2048)&&(i(o),c(r)),m()||y(d,n)||(i(l),c(r))}():"ArrowRight"===u.code?function(){let d;for(let r=0;r<4;r++){d=(n=s[r].reverse()).slice(),s[r]=a(n).reverse();for(let n=0;n<4;n++)e=document.getElementById(r.toString()+"-"+n.toString()),t=s[r][n],f(e,t)}S(2048)&&(c(r),i(o)),m()||y(d,n)||(i(l),c(r))}():"ArrowUp"===u.code?function(){let d;for(let r=0;r<4;r++){d=(n=[s[0][r],s[1][r],s[2][r],s[3][r]]).slice(),n=a(n);for(let o=0;o<4;o++)s[o][r]=n[o],e=document.getElementById(o.toString()+"-"+r.toString()),t=s[o][r],f(e,t)}S(2048)&&(i(o),c(r)),m()||y(d,n)||(i(l),c(r))}():"ArrowDown"===u.code&&function(){let d;for(let r=0;r<4;r++){d=n.slice(),n=a(n=[s[0][r],s[1][r],s[2][r],s[3][r]].reverse()).reverse();for(let o=0;o<4;o++)s[o][r]=n[o],e=document.getElementById(o.toString()+"-"+r.toString()),t=s[o][r],f(e,t)}S(2048)&&(i(o),c(r)),m()||y(d,n)||(i(l),c(r))}(),document.querySelector(".game-score").innerText=d,y(L,s)||g()}),function(){for(let t=0;t<4;t++)for(let n=0;n<4;n++)(e=document.getElementById(t.toString()+"-"+n.toString())).innerText="",e.classList.value="",e.classList.add("field-cell")}(),c(o),c(l),c(r),L.classList.value="",L.classList.add("button","restart"),L.innerText="Restart",d=0,s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],document.querySelector(".game-score").innerText=d,g(),g()});
//# sourceMappingURL=index.d302dae9.js.map
