!function(){var e,t,r,n=document.querySelector(".message-start"),o=document.querySelector(".message-win"),i=document.querySelector(".message-lose");function a(e){e.classList.remove("hidden")}function c(e){e.classList.add("hidden")}var d=0,f=document.getElementById("field");f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(var l=0;l<4;l++)for(var s=0;s<4;s++)(e=document.createElement("div")).id=l.toString()+"-"+s.toString(),t=f[l][s],u(e,t),document.getElementById("field").append(e);function u(r,n){e=r,t=n,e.innerText="",e.classList.value="",e.classList.add("field-cell"),t>0&&(e.innerText=t,t<=1024?e.classList.add("field-cell--"+t.toString()):e.classList.add("field-cell--2048"))}function v(e){return e.filter(function(e){return 0!==e})}function g(e){r=v(e);for(var t=0;t<r.length-1;t++)r[t]===r[t+1]&&(r[t]*=2,d+=r[t],r[t+1]=0);for(r=v(r);r.length<4;)r.push(0);return r}function m(){if(y(0))for(var t=!1;!t;){var r=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===f[r][n]){var o=Math.random();f[r][n]=o<.9?2:4,(e=document.getElementById(r.toString()+"-"+n.toString())).innerText=f[r][n].toString(),e.classList.add("field-cell--"+f[r][n].toString()),t=!0}}}function S(){for(var e=0;e<4;e++)for(var t=0;t<4;t++)if(0===f[e][t])return!0;for(var r=0;r<4;r++)for(var n=0;n<4;n++){if(n<3&&f[r][n]===f[r][n+1]||r<3&&f[r][n]===f[r+1][n])return!0;return!1}}function y(e){for(var t=0;t<4;t++)for(var r=0;r<4;r++)if(f[t][r]===e)return!0;return!1}function L(e,t){if(e.length!==t.length)return!1;for(var r=0;r<4;r++)for(var n=0;n<4;n++)if(e[r][n]!==t[r][n])return!1;return!0}var h=document.querySelector(".button.start");h.addEventListener("click",function(){document.addEventListener("keyup",function(l){var s=JSON.parse(JSON.stringify(f));"ArrowLeft"===l.code?function(){for(var d,l=0;l<4;l++){d=(r=f[l]).slice(),f[l]=g(r);for(var s=0;s<4;s++)e=document.getElementById(l.toString()+"-"+s.toString()),t=f[l][s],u(e,t)}y(2048)&&(a(o),c(n)),S()||L(d,r)||(a(i),c(n))}():"ArrowRight"===l.code?function(){for(var d,l=0;l<4;l++){d=(r=f[l].reverse()).slice(),f[l]=g(r).reverse();for(var s=0;s<4;s++)e=document.getElementById(l.toString()+"-"+s.toString()),t=f[l][s],u(e,t)}y(2048)&&(c(n),a(o)),S()||L(d,r)||(a(i),c(n))}():"ArrowUp"===l.code?function(){for(var d,l=0;l<4;l++){d=(r=[f[0][l],f[1][l],f[2][l],f[3][l]]).slice(),r=g(r);for(var s=0;s<4;s++)f[s][l]=r[s],e=document.getElementById(s.toString()+"-"+l.toString()),t=f[s][l],u(e,t)}y(2048)&&(a(o),c(n)),S()||L(d,r)||(a(i),c(n))}():"ArrowDown"===l.code&&function(){for(var d,l=0;l<4;l++){d=r.slice(),r=g(r=[f[0][l],f[1][l],f[2][l],f[3][l]].reverse()).reverse();for(var s=0;s<4;s++)f[s][l]=r[s],e=document.getElementById(s.toString()+"-"+l.toString()),t=f[s][l],u(e,t)}y(2048)&&(a(o),c(n)),S()||L(d,r)||(a(i),c(n))}(),document.querySelector(".game-score").innerText=d,L(s,f)||m()}),function(){for(var t=0;t<4;t++)for(var r=0;r<4;r++)(e=document.getElementById(t.toString()+"-"+r.toString())).innerText="",e.classList.value="",e.classList.add("field-cell")}(),c(o),c(i),c(n),h.classList.value="",h.classList.add("button","restart"),h.innerText="Restart",d=0,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],document.querySelector(".game-score").innerText=d,m(),m()})}();
//# sourceMappingURL=index.f4726c31.js.map
